<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>照美丽的菜单（川渝100道家常菜）</title>
<style>
  body {
    font-family: "微软雅黑", sans-serif;
    background: #e7f0e7;
    margin: 0; padding: 0;
    color: #2b4d2b;
  }
  header {
    background: #3b7d3b;
    color: white;
    text-align: center;
    padding: 18px 0;
    font-size: 1.8em;
    font-weight: bold;
    box-shadow: 0 3px 5px rgba(0,0,0,0.1);
  }
  .container {
    max-width: 600px;
    margin: 12px auto;
    padding: 0 12px;
  }
  .menu-list {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    justify-content: center;
  }
  .dish {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    width: 48%;
    min-width: 140px;
    cursor: pointer;
    transition: transform 0.15s ease;
  }
  .dish:hover {
    transform: scale(1.03);
  }
  .dish img {
    width: 100%;
    height: 110px;
    border-top-left-radius: 8px;
    border-top-right-radius: 8px;
    object-fit: cover;
  }
  .dish-info {
    padding: 8px;
    text-align: center;
  }
  .dish-name {
    font-weight: 600;
    margin-bottom: 4px;
  }
  .dish-price {
    color: #4a7a4a;
    font-weight: bold;
  }
  .selected {
    box-shadow: 0 0 12px 3px #2e7d32;
    border: 2px solid #2e7d32;
  }
  .order-summary {
    margin-top: 20px;
    background: #d7ecd7;
    border-radius: 8px;
    padding: 12px;
  }
  .order-summary h3 {
    margin-top: 0;
    font-weight: 700;
    color: #2b4d2b;
  }
  .order-item {
    display: flex;
    justify-content: space-between;
    margin-bottom: 6px;
  }
  .total-price {
    font-weight: 700;
    font-size: 1.2em;
    color: #1b3c1b;
    text-align: right;
  }
  button {
    background: #3b7d3b;
    border: none;
    color: white;
    font-size: 1.1em;
    padding: 12px 0;
    width: 100%;
    margin-top: 20px;
    border-radius: 8px;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  button:hover {
    background: #2e6d2e;
  }
  .modal-bg {
    position: fixed;
    top:0; left:0; right:0; bottom:0;
    background: rgba(0,0,0,0.4);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 100;
  }
  .modal {
    background: white;
    border-radius: 10px;
    max-width: 320px;
    width: 90%;
    padding: 16px;
  }
  .modal h3 {
    margin-top: 0;
    color: #2b4d2b;
  }
  .modal label {
    display: block;
    margin-top: 10px;
    font-weight: 600;
  }
  .modal input {
    width: 100%;
    padding: 6px;
    border: 1px solid #ccc;
    border-radius: 6px;
    margin-top: 4px;
  }
  .modal-buttons {
    margin-top: 18px;
    text-align: right;
  }
  .modal-buttons button {
    width: auto;
    padding: 8px 14px;
    margin-left: 8px;
  }
  .add-menu-btn {
    margin: 16px auto;
    display: block;
    max-width: 200px;
  }
  .pagination {
    margin-top: 12px;
    text-align: center;
  }
  .pagination button {
    margin: 0 6px;
    width: auto;
    padding: 8px 14px;
  }
</style>
</head>
<body>

<header>照美丽的菜单（川渝100道家常菜）</header>
<div class="container">

  <button class="add-menu-btn">➕ 添加菜单项</button>

  <div class="menu-list" id="menuList">
    <!-- 菜品列表动态生成 -->
  </div>

  <div class="pagination">
    <button id="prevPageBtn">上一页</button>
    <span id="pageInfo"></span>
    <button id="nextPageBtn">下一页</button>
  </div>

  <div class="order-summary" id="orderSummary" style="display:none;">
    <h3>已选菜单</h3>
    <div id="orderItems"></div>
    <div class="total-price" id="totalPrice">总价: ¥0</div>
  </div>

  <button id="submitOrder" style="display:none;">提交订单</button>
</div>

<div class="modal-bg" id="modalBg">
  <div class="modal">
    <h3>添加新菜单项</h3>
    <label for="dishName">菜名：</label>
    <input type="text" id="dishName" placeholder="输入菜名" />
    <label for="dishPrice">价格(元)：</label>
    <input type="number" id="dishPrice" placeholder="输入价格" />
    <label for="dishImg">图片链接：</label>
    <input type="url" id="dishImg" placeholder="输入图片链接（可选）" />
    <div class="modal-buttons">
      <button id="cancelBtn">取消</button>
      <button id="addBtn">添加</button>
    </div>
  </div>
</div>

<script>
  const menuData = [
    {name:"宫保鸡丁",price:28,img:"https://img.meishij.net/p/20150217/201502171039536181.jpg"},
    {name:"麻婆豆腐",price:18,img:"https://img.meishij.net/p/20170823/201708231535088227611.jpg"},
    {name:"鱼香肉丝",price:26,img:"https://img.meishij.net/p/20130508/2013050810120132052.jpg"},
    {name:"辣子鸡丁",price:30,img:"https://img.meishij.net/p/20150623/201506231127399791873.jpg"},
    {name:"回锅肉",price:32,img:"https://img.meishij.net/p/20150121/201501211333036162431.jpg"},
    {name:"酸菜鱼",price:48,img:"https://img.meishij.net/p/20150625/201506251659534582928.jpg"},
    {name:"水煮鱼片",price:45,img:"https://img.meishij.net/p/20150729/201507291500518256813.jpg"},
    {name:"火锅牛肉",price:58,img:"https://img.meishij.net/p/20141210/201412101407464730994.jpg"},
    {name:"麻辣香锅",price:50,img:"https://img.meishij.net/p/20141024/201410241244218434961.jpg"},
    {name:"干煸四季豆",price:20,img:"https://img.meishij.net/p/20170615/201706151431510233365.jpg"},
    {name:"夫妻肺片",price:38,img:"https://img.meishij.net/p/20150513/201505131402484774538.jpg"},
    {name:"红烧肉",price:40,img:"https://img.meishij.net/p/20150121/201501211329355381012.jpg"},
    {name:"麻辣兔头",price:35,img:"https://img.meishij.net/p/20140630/201406301138201211343.jpg"},
    {name:"椒盐排骨",price:36,img:"https://img.meishij.net/p/20150622/201506221259055735919.jpg"},
    {name:"鱼香茄子",price:22,img:"https://img.meishij.net/p/20160107/201601071337355111442.jpg"},
    {name:"蒜泥白肉",price:28,img:"https://img.meishij.net/p/20150513/201505131323036452053.jpg"},
    {name:"干锅花菜",price:25,img:"https://img.meishij.net/p/20171221/201712211628365243596.jpg"},
    {name:"香辣虾",price:48,img:"https://img.meishij.net/p/20170518/201705181333227185054.jpg"},
    {name:"鱼香豆腐",price:18,img:"https://img.meishij.net/p/20150601/201506011303107943612.jpg"},
    {name:"川北凉粉",price:16,img:"https://img.meishij.net/p/20170818/201708181049339927553.jpg"},
    {name:"麻辣牛肉",price:50,img:"https://img.meishij.net/p/20160504/201605041403014873074.jpg"},
    {name:"蒸鱼头",price:42,img:"https://img.meishij.net/p/20150622/201506221258368256254.jpg"},
    {name:"酸辣土豆丝",price:15,img:"https://img.meishij.net/p/20150411/201504111035199823869.jpg"},
    {name:"香辣蟹",price:65,img:"https://img.meishij.net/p/20160323/201603231326158911933.jpg"},
    {name:"辣椒炒肉",price:26,img:"https://img.meishij.net/p/20150108/201501081622174516176.jpg"},
    {name:"泡椒凤爪",price:20,img:"https://img.meishij.net/p/20150807/201508071331167910969.jpg"},
    {name:"毛血旺",price:48,img:"https://img.meishij.net/p/20140625/201406251348195592784.jpg"},
    {name:"剁椒鱼头",price:40,img:"https://img.meishij.net/p/20160108/201601081433225112367.jpg"},
    {name:"辣子肥肠",price:38,img:"https://img.meishij.net/p/20150520/201505201427299361607.jpg"},
    {name:"回锅肉炒饭",price:22,img:"https://img.meishij.net/p/20160711/201607111145392186545.jpg"},
    {name:"红油抄手",price:18,img:"https://img.meishij.net/p/20150603/201506031051031984103.jpg"},
    {name:"泡椒田鸡",price:55,img:"https://img.meishij.net/p/20170531/201705311335345249692.jpg"},
    {name:"豆瓣鱼",price:45,img:"https://img.meishij.net/p/20160608/201606081137423535050.jpg"},
    {name:"辣炒田螺",price:32,img:"https://img.meishij.net/p/20150723/201507231631506145235.jpg"},
    {name:"白汤牛肉",price:50,img:"https://img.meishij.net/p/20140630/201406301144397184576.jpg"},
    {name:"毛肚火锅",price:60,img:"https://img.meishij.net/p/20150706/201507061425234159995.jpg"},
    {name:"干锅牛蛙",price:55,img:"https://img.meishij.net/p/20150706/201507061426414927028.jpg"},
    {name:"麻辣烫",price:25,img:"https://img.meishij.net/p/20150907/201509071444276832920.jpg"},
    {name:"香菇青菜",price:18,img:"https://img.meishij.net/p/20170831/201708311135279139356.jpg"},
    {name:"辣子鸡",price:30,img:"https://img.meishij.net/p/20170522/201705221456137709283.jpg"},
    {name:"酱香排骨",price:38,img:"https://img.meishij.net/p/20160607/201606071135172203580.jpg"},
    {name:"口水鸡",price:28,img:"https://img.meishij.net/p/20160330/201603301411441597965.jpg"},
    {name:"红烧茄子",price:22,img:"https://img.meishij.net/p/20161020/201610201635084330991.jpg"},
    {name:"蒜香排骨",price:35,img:"https://img.meishij.net/p/20160111/201601111429298535525.jpg"},
    {name:"干锅鸡翅",price:35,img:"https://img.meishij.net/p/20160108/201601081427567365498.jpg"},
    {name:"香辣鸭头",price:40,img:"https://img.meishij.net/p/20140813/201408131151599262814.jpg"},
    {name:"辣子牛肉",price:45,img:"https://img.meishij.net/p/20160105/201601051453584574497.jpg"},
    {name:"清蒸鲈鱼",price:50,img:"https://img.meishij.net/p/20150120/201501201312414081847.jpg"},
    {name:"泡椒牛蛙",price:50,img:"https://img.meishij.net/p/20150414/201504141116125096197.jpg"},
    {name:"酸汤肥牛",price:48,img:"https://img.meishij.net/p/20150819/201508191635245910153.jpg"},
    {name:"辣炒鸭肠",price:38,img:"https://img.meishij.net/p/20151202/201512021044331838835.jpg"},
    {name:"麻辣猪蹄",price:30,img:"https://img.meishij.net/p/20160714/201607141450038927060.jpg"},
    {name:"酸辣粉",price:15,img:"https://img.meishij.net/p/20140901/201409011158399258238.jpg"},
    {name:"香辣鸡杂",price:32,img:"https://img.meishij.net/p/20151126/201511261430106815014.jpg"},
    {name:"泡椒凤爪",price:20,img:"https://img.meishij.net/p/20151203/201512031337068095905.jpg"},
    {name:"酸辣土豆丝",price:15,img:"https://img.meishij.net/p/20150822/201508221010243755741.jpg"},
    {name:"凉拌木耳",price:16,img:"https://img.meishij.net/p/20151123/201511231031195633935.jpg"},
    {name:"干锅菜花",price:25,img:"https://img.meishij.net/p/20161103/201611031321444484512.jpg"},
    {name:"干锅肥肠",price:45,img:"https://img.meishij.net/p/20161102/201611021123465882657.jpg"},
    {name:"泡椒牛肉",price:38,img:"https://img.meishij.net/p/20160112/201601121238328950408.jpg"},
    {name:"回锅猪肝",price:28,img:"https://img.meishij.net/p/20150820/201508201153534765250.jpg"},
    {name:"豆豉蒸排骨",price:35,img:"https://img.meishij.net/p/20150909/201509091243491117676.jpg"},
    {name:"鱼香肉片",price:26,img:"https://img.meishij.net/p/20160111/201601111425487542780.jpg"},
    {name:"酸辣藕片",price:20,img:"https://img.meishij.net/p/20160108/201601081420164858528.jpg"},
    {name:"麻辣兔丁",price:35,img:"https://img.meishij.net/p/20150623/201506231437054915316.jpg"},
    {name:"麻婆茄子",price:22,img:"https://img.meishij.net/p/20150823/201508231353158016968.jpg"},
    {name:"干锅排骨",price:38,img:"https://img.meishij.net/p/20150722/201507221134299392189.jpg"},
    {name:"蒜泥茄子",price:18,img:"https://img.meishij.net/p/20150607/201506071338223018973.jpg"},
    {name:"红烧狮子头",price:30,img:"https://img.meishij.net/p/20150325/201503251427404234298.jpg"},
    {name:"辣炒鸭胗",price:38,img:"https://img.meishij.net/p/20150721/201507211438401295051.jpg"},
    {name:"豉汁蒸排骨",price:35,img:"https://img.meishij.net/p/20150611/201506111316438593345.jpg"},
    {name:"蒸水蛋",price:12,img:"https://img.meishij.net/p/20160104/201601041411581445498.jpg"},
    {name:"青椒肉丝",price:24,img:"https://img.meishij.net/p/20160107/201601071333227081759.jpg"},
    {name:"干煸牛肉丝",price:26,img:"https://img.meishij.net/p/20150925/201509251445009314840.jpg"},
    {name:"锅包肉",price:30,img:"https://img.meishij.net/p/20150715/201507151042436548393.jpg"},
    {name:"蒜香鸡翅",price:35,img:"https://img.meishij.net/p/20160108/201601081418123158419.jpg"},
    {name:"红烧鸡块",price:28,img:"https://img.meishij.net/p/20150607/201506071437156485814.jpg"},
    {name:"酸汤鱼",price:48,img:"https://img.meishij.net/p/20160507/201605071442121764949.jpg"},
    {name:"干锅土豆片",price:22,img:"https://img.meishij.net/p/20160702/201607021144333072378.jpg"},
    {name:"麻辣鸡丁",price:30,img:"https://img.meishij.net/p/20160808/201608081418213035578.jpg"},
    {name:"椒盐虾",price:40,img:"https://img.meishij.net/p/20150611/201506111351106427327.jpg"},
    {name:"蒜蓉油麦菜",price:18,img:"https://img.meishij.net/p/20151201/201512011353037187031.jpg"},
    {name:"家常豆腐",price:20,img:"https://img.meishij.net/p/20150602/201506021114246962607.jpg"},
    {name:"干锅鸡块",price:35,img:"https://img.meishij.net/p/20150607/201506071432272468437.jpg"},
  ];

  let order = {};
  const pageSize = 12;
  let currentPage = 1;

  const menuList = document.getElementById("menuList");
  const orderSummary = document.getElementById("orderSummary");
  const orderItems = document.getElementById("orderItems");
  const totalPriceEl = document.getElementById("totalPrice");
  const submitOrderBtn = document.getElementById("submitOrder");
  const addMenuBtn = document.querySelector(".add-menu-btn");
  const modalBg = document.getElementById("modalBg");
  const dishNameInput = document.getElementById("dishName");
  const dishPriceInput = document.getElementById("dishPrice");
  const dishImgInput = document.getElementById("dishImg");
  const cancelBtn = document.getElementById("cancelBtn");
  const addBtn = document.getElementById("addBtn");
  const prevPageBtn = document.getElementById("prevPageBtn");
  const nextPageBtn = document.getElementById("nextPageBtn");
  const pageInfo = document.getElementById("pageInfo");

  function renderMenu() {
    menuList.innerHTML = "";
    const start = (currentPage - 1) * pageSize;
    const end = Math.min(start + pageSize, menuData.length);
    for(let i = start; i < end; i++){
      const dish = menuData[i];
      const dishDiv = document.createElement("div");
      dishDiv.className = "dish";
      if(order[i]) dishDiv.classList.add("selected");
      dishDiv.innerHTML = `<img src="${dish.img}" alt="${dish.name}"/><div class="dish-info"><div class="dish-name">${dish.name}</div><div class="dish-price">¥${dish.price}</div></div>`;
      dishDiv.onclick = () => toggleSelect(i, dishDiv);
      menuList.appendChild(dishDiv);
    }
    pageInfo.textContent = `第 ${currentPage} 页 / 共 ${Math.ceil(menuData.length/pageSize)} 页`;
    updateOrderUI();
  }

  function toggleSelect(i, element) {
    if(order[i]) {
      delete order[i];
      element.classList.remove("selected");
    } else {
      order[i] = 1;
      element.classList.add("selected");
    }
    updateOrderUI();
  }

  function updateOrderUI() {
    const keys = Object.keys(order);
    if(keys.length === 0) {
      orderSummary.style.display = "none";
      submitOrderBtn.style.display = "none";
      return;
    }
    orderSummary.style.display = "block";
    submitOrderBtn.style.display = "block";
    orderItems.innerHTML = "";
    let total = 0;
    keys.forEach(i => {
      const dish = menuData[i];
      const qty = order[i];
      total += dish.price * qty;
      const itemDiv = document.createElement("div");
      itemDiv.className = "order-item";
      itemDiv.textContent = `${dish.name} × ${qty}`;
      const priceSpan = document.createElement("span");
      priceSpan.textContent = `¥${dish.price * qty}`;
      itemDiv.appendChild(priceSpan);
      orderItems.appendChild(itemDiv);
    });
    totalPriceEl.textContent = `总价: ¥${total}`;
  }

  prevPageBtn.onclick = () => {
    if(currentPage >1){
      currentPage--;
      renderMenu();
    }
  }
  nextPageBtn.onclick = () => {
    if(currentPage < Math.ceil(menuData.length / pageSize)){
      currentPage++;
      renderMenu();
    }
  }

  addMenuBtn.onclick = () => {
    dishNameInput.value = "";
    dishPriceInput.value = "";
    dishImgInput.value = "";
    modalBg.style.display = "flex";
  }
  cancelBtn.onclick = () => {
    modalBg.style.display = "none";
  }
  addBtn.onclick = () => {
    const name = dishNameInput.value.trim();
    const price = parseFloat(dishPriceInput.value);
    let img = dishImgInput.value.trim();
    if(!name) { alert("请输入菜名"); return; }
    if(isNaN(price) || price <= 0) { alert("请输入正确价格"); return; }
    if(!img) img = "https://via.placeholder.com/300x180?text=无图";
    menuData.push({name, price, img});
    modalBg.style.display = "none";
    currentPage = Math.ceil(menuData.length / pageSize);
    renderMenu();
  }

  submitOrderBtn.onclick = () => {
    const keys = Object.keys(order);
    if(keys.length === 0){
      alert("请选择至少一道菜");
      return;
    }
    let orderText = "";
    keys.forEach(i => {
      const dish = menuData[i];
      const qty = order[i];
      orderText += `${dish.name} × ${qty}; `;
    });

    // 替换下面URL为你的Google表单提交地址
    const formAction = "https://docs.google.com/forms/d/e/1FAIpQLSerJIs1BXbw-80lN3okAEn5viTedr1D4uCiYgt51jz4HgvWrQ/formResponse";

    // 替换下面为表单“订单内容”字段entry编号
    const orderFieldName = "entry.1873846742";

    const formData = new FormData();
    formData.append(orderFieldName, orderText);

    fetch(formAction, {
      method: "POST",
      mode: "no-cors",
      body: formData
    }).then(() => {
      alert("订单已提交，谢谢！");
      order = {};
      currentPage = 1;
      renderMenu();
    }).catch(() => {
      alert("提交失败，请稍后再试");
    });
  }

  renderMenu();
</script>
</body>
</html>