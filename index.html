<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>照美丽的菜单</title>
<style>
  body {
    background: #e6f0e6;
    font-family: "微软雅黑", sans-serif;
    margin: 0; padding: 0;
    color: #2f4f2f;
  }
  header {
    background: #4caf50;
    color: white;
    padding: 1em 1.5em;
    font-size: 1.6em;
    font-weight: bold;
    text-align: center;
  }
  main {
    max-width: 480px;
    margin: 1em auto 3em;
    padding: 0 1em;
  }
  .menu-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.8em;
  }
  .dish-card {
    background: white;
    border-radius: 10px;
    padding: 0.7em;
    box-shadow: 0 0 5px #9ccc9c;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .dish-card img {
    width: 100%;
    border-radius: 10px;
    height: 100px;
    object-fit: cover;
  }
  .dish-name {
    margin-top: 0.5em;
    font-weight: 600;
    font-size: 1em;
    text-align: center;
  }
  .dish-check {
    margin-top: 0.5em;
  }
  .pagination {
    margin: 1em 0;
    text-align: center;
  }
  .pagination button {
    background: #4caf50;
    border: none;
    color: white;
    padding: 0.5em 1.1em;
    margin: 0 0.2em;
    border-radius: 6px;
    font-weight: 600;
    cursor: pointer;
  }
  .pagination button:disabled {
    background: #9ccc9c;
    cursor: not-allowed;
  }
  .submit-area {
    margin-top: 1.5em;
    text-align: center;
  }
  .submit-area button {
    background: #388e3c;
    border: none;
    padding: 0.9em 1.6em;
    color: white;
    font-size: 1.2em;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
  }
  .add-dish-area {
    margin: 1.5em 0;
    text-align: center;
  }
  .add-dish-area input {
    width: 65%;
    padding: 0.5em;
    font-size: 1em;
    border: 2px solid #4caf50;
    border-radius: 6px;
  }
  .add-dish-area button {
    background: #4caf50;
    border: none;
    padding: 0.55em 1em;
    color: white;
    font-size: 1em;
    border-radius: 6px;
    margin-left: 0.5em;
    cursor: pointer;
  }
</style>
</head>
<body>
<header>照美丽的菜单</header>
<main>
  <div class="menu-grid" id="menuGrid"></div>
  <div class="pagination">
    <button id="prevPageBtn">上一页</button>
    <span id="pageInfo"></span>
    <button id="nextPageBtn">下一页</button>
  </div>

  <div class="add-dish-area">
    <input type="text" id="newDishInput" placeholder="输入新菜名，点击添加" />
    <button id="addDishBtn">添加菜品</button>
  </div>

  <div class="submit-area">
    <button id="submitBtn">提交订单</button>
  </div>
</main>

<script>
  const dishesPerPage = 10; // 每页10道菜，分页显示
  const googleFormAction = "https://docs.google.com/forms/d/e/1FAIpQLSerJIs1BXbw-80lN3okAEn5viTedr1D4uCiYgt51jz4HgvWrQ/formResponse";
  const orderFieldName = "entry.595366321"; // 你表单的 entry 编号

  // 100+道川渝家常菜，图片是示意用的免费网络图链接（你可换成自己图片链接）
  const dishes = [
    {name:"麻婆豆腐", img:"https://img.meishi.cc/20200305/20200305160856508.jpg"},
    {name:"宫保鸡丁", img:"https://img.meishi.cc/20200305/20200305161114887.jpg"},
    {name:"鱼香肉丝", img:"https://img.meishi.cc/20200305/20200305161057852.jpg"},
    {name:"回锅肉", img:"https://img.meishi.cc/20200305/20200305160929110.jpg"},
    {name:"水煮牛肉", img:"https://img.meishi.cc/20200305/20200305161211711.jpg"},
    {name:"辣子鸡", img:"https://img.meishi.cc/20200305/20200305161314733.jpg"},
    {name:"酸菜鱼", img:"https://img.meishi.cc/20200305/20200305161439252.jpg"},
    {name:"火锅", img:"https://img.meishi.cc/20200305/20200305161512610.jpg"},
    {name:"干锅菜花", img:"https://img.meishi.cc/20200305/20200305161613738.jpg"},
    {name:"麻辣香锅", img:"https://img.meishi.cc/20200305/20200305161715833.jpg"},
    {name:"夫妻肺片", img:"https://img.meishi.cc/20200305/20200305161801953.jpg"},
    {name:"辣子兔", img:"https://img.meishi.cc/20200305/20200305161839281.jpg"},
    {name:"棒棒鸡", img:"https://img.meishi.cc/20200305/20200305161904856.jpg"},
    {name:"口水鸡", img:"https://img.meishi.cc/20200305/20200305161947908.jpg"},
    {name:"蒜泥白肉", img:"https://img.meishi.cc/20200305/20200305162013845.jpg"},
    {name:"麻辣牛肉", img:"https://img.meishi.cc/20200305/20200305162044274.jpg"},
    {name:"香辣蟹", img:"https://img.meishi.cc/20200305/20200305162105999.jpg"},
    {name:"干煸四季豆", img:"https://img.meishi.cc/20200305/20200305162130326.jpg"},
    {name:"红油抄手", img:"https://img.meishi.cc/20200305/20200305162157217.jpg"},
    {name:"酸辣土豆丝", img:"https://img.meishi.cc/20200305/20200305162224730.jpg"},
    {name:"蒸鱼", img:"https://img.meishi.cc/20200305/20200305162248267.jpg"},
    {name:"蒜香排骨", img:"https://img.meishi.cc/20200305/20200305162320402.jpg"},
    {name:"鱼香茄子", img:"https://img.meishi.cc/20200305/20200305162349373.jpg"},
    {name:"家常豆腐", img:"https://img.meishi.cc/20200305/20200305162414690.jpg"},
    {name:"辣炒花蛤", img:"https://img.meishi.cc/20200305/20200305162439301.jpg"},
    {name:"酸辣汤", img:"https://img.meishi.cc/20200305/20200305162507341.jpg"},
    {name:"炒饭", img:"https://img.meishi.cc/20200305/20200305162532456.jpg"},
    {name:"蒸蛋", img:"https://img.meishi.cc/20200305/20200305162557410.jpg"},
    {name:"锅塌豆腐", img:"https://img.meishi.cc/20200305/20200305162625125.jpg"},
    {name:"锅包肉", img:"https://img.meishi.cc/20200305/20200305162654589.jpg"},
    {name:"回锅肉片", img:"https://img.meishi.cc/20200305/20200305162720860.jpg"},
    {name:"麻辣小龙虾", img:"https://img.meishi.cc/20200305/20200305162746913.jpg"},
    {name:"酸汤肥牛", img:"https://img.meishi.cc/20200305/20200305162813947.jpg"},
    {name:"香辣虾", img:"https://img.meishi.cc/20200305/20200305162843040.jpg"},
    {name:"麻辣鸭头", img:"https://img.meishi.cc/20200305/20200305162908543.jpg"},
    {name:"麻辣豆腐", img:"https://img.meishi.cc/20200305/20200305162939525.jpg"},
    {name:"红烧排骨", img:"https://img.meishi.cc/20200305/20200305163002970.jpg"},
    {name:"麻辣香肠", img:"https://img.meishi.cc/20200305/20200305163030351.jpg"},
    {name:"蒜蓉粉丝蒸虾", img:"https://img.meishi.cc/20200305/20200305163057011.jpg"},
    {name:"油炸臭豆腐", img:"https://img.meishi.cc/20200305/20200305163121425.jpg"},
    {name:"鱼香豆腐", img:"https://img.meishi.cc/20200305/20200305163147640.jpg"},
    {name:"麻辣肥肠", img:"https://img.meishi.cc/20200305/20200305163210215.jpg"},
    {name:"口味虾", img:"https://img.meishi.cc/20200305/20200305163239596.jpg"},
    {name:"干锅肥肠", img:"https://img.meishi.cc/20200305/20200305163308859.jpg"},
    {name:"蒜泥黄瓜", img:"https://img.meishi.cc/20200305/20200305163331415.jpg"},
    {name:"泡椒凤爪", img:"https://img.meishi.cc/20200305/20200305163356270.jpg"},
    {name:"香辣兔丁", img:"https://img.meishi.cc/20200305/20200305163424901.jpg"},
    {name:"剁椒鱼头", img:"https://img.meishi.cc/20200305/20200305163449439.jpg"},
    {name:"辣炒田螺", img:"https://img.meishi.cc/20200305/20200305163519139.jpg"},
    {name:"蒜香鸡翅", img:"https://img.meishi.cc/20200305/20200305163543956.jpg"},
    {name:"泡椒牛蛙", img:"https://img.meishi.cc/20200305/20200305163609932.jpg"},
    {name:"香辣豆腐脑", img:"https://img.meishi.cc/20200305/20200305163635739.jpg"},
    {name:"酸辣粉", img:"https://img.meishi.cc/20200305/20200305163704715.jpg"},
    {name:"担担面", img:"https://img.meishi.cc/20200305/20200305163730540.jpg"},
    {name:"重庆小面", img:"https://img.meishi.cc/20200305/20200305163757782.jpg"},
    {name:"毛血旺", img:"https://img.meishi.cc/20200305/20200305163827241.jpg"},
    {name:"干锅鸡", img:"https://img.meishi.cc/20200305/20200305163853464.jpg"},
    {name:"干锅排骨", img:"https://img.meishi.cc/20200305/20200305163920292.jpg"},
    {name:"石锅鱼", img:"https://img.meishi.cc/20200305/20200305163947731.jpg"},
    {name:"酸辣鸡杂", img:"https://img.meishi.cc/20200305/20200305164016050.jpg"},
    {name:"泡椒凤尾虾", img:"https://img.meishi.cc/20200305/20200305164043712.jpg"},
    {name:"酱香牛肉", img:"https://img.meishi.cc/20200305/20200305164110190.jpg"},
    {name:"辣炒虾仁", img:"https://img.meishi.cc/20200305/20200305164137047.jpg"},
    {name:"红烧牛肉面", img:"https://img.meishi.cc/20200305/20200305164205473.jpg"},
    {name:"红烧鸡块", img:"https://img.meishi.cc/20200305/20200305164229534.jpg"},
    {name:"凉拌木耳", img:"https://img.meishi.cc/20200305/20200305164257027.jpg"},
    {name:"拌豆皮", img:"https://img.meishi.cc/20200305/20200305164325531.jpg"},
    {name:"香辣螺丝", img:"https://img.meishi.cc/20200305/20200305164353564.jpg"},
    {name:"豆花", img:"https://img.meishi.cc/20200305/20200305164416618.jpg"},
    {name:"鱼香肉末茄子", img:"https://img.meishi.cc/20200305/20200305164445783.jpg"},
    {name:"酸汤肥牛锅", img:"https://img.meishi.cc/20200305/20200305164515815.jpg"},
    {name:"辣炒肚丝", img:"https://img.meishi.cc/20200305/20200305164540644.jpg"},
    {name:"凉拌黄瓜", img:"https://img.meishi.cc/20200305/20200305164608794.jpg"},
    {name:"毛肚火锅", img:"https://img.meishi.cc/20200305/20200305164633622.jpg"},
    {name:"豉汁排骨", img:"https://img.meishi.cc/20200305/20200305164658699.jpg"},
    {name:"铁板豆腐", img:"https://img.meishi.cc/20200305/20200305164723951.jpg"},
    {name:"香辣豆干", img:"https://img.meishi.cc/20200305/20200305164748784.jpg"},
    {name:"辣炒鸡杂", img:"https://img.meishi.cc/20200305/20200305164816304.jpg"},
    {name:"酸辣藕片", img:"https://img.meishi.cc/20200305/20200305164843820.jpg"},
    {name:"花椒鸡", img:"https://img.meishi.cc/20200305/20200305164907274.jpg"},
    {name:"香辣牛蛙", img:"https://img.meishi.cc/20200305/20200305164932429.jpg"},
    {name:"干锅花菜", img:"https://img.meishi.cc/20200305/20200305164957387.jpg"},
    {name:"川北凉粉", img:"https://img.meishi.cc/20200305/20200305165024461.jpg"},
    {name:"凉拌海带丝", img:"https://img.meishi.cc/20200305/20200305165050721.jpg"},
    {name:"蒜蓉空心菜", img:"https://img.meishi.cc/20200305/20200305165118742.jpg"},
    {name:"泡椒豆腐", img:"https://img.meishi.cc/20200305/20200305165145921.jpg"},
    {name:"红油牛肉", img:"https://img.meishi.cc/20200305/20200305165213451.jpg"},
    {name:"辣炒猪肝", img:"https://img.meishi.cc/20200305/20200305165240897.jpg"},
    {name:"家常小炒肉", img:"https://img.meishi.cc/20200305/20200305165309985.jpg"},
    {name:"香辣鸡丁", img:"https://img.meishi.cc/20200305/20200305165334579.jpg"},
    {name:"麻辣香肠炒饭", img:"https://img.meishi.cc/20200305/20200305165402458.jpg"},
    {name:"泡椒田鸡", img:"https://img.meishi.cc/20200305/20200305165428934.jpg"},
    {name:"干锅土豆片", img:"https://img.meishi.cc/20200305/20200305165455290.jpg"},
    {name:"辣炒黄豆芽", img:"https://img.meishi.cc/20200305/20200305165523840.jpg"},
    {name:"香辣螺蛳", img:"https://img.meishi.cc/20200305/20200305165551897.jpg"},
    {name:"豉汁蒸鱼", img:"https://img.meishi.cc/20200305/20200305165616893.jpg"},
    {name:"红烧豆腐", img:"https://img.meishi.cc/20200305/20200305165643371.jpg"},
    {name:"泡椒牛肉", img:"https://img.meishi.cc/20200305/20200305165708781.jpg"},
    {name:"麻辣毛肚", img:"https://img.meishi.cc/20200305/20200305165733200.jpg"},
    {name:"香辣茄子", img:"https://img.meishi.cc/20200305/20200305165757834.jpg"},
    {name:"红烧鸡翅", img:"https://img.meishi.cc/20200305/20200305165825928.jpg"},
    {name:"酸辣白菜", img:"https://img.meishi.cc/20200305/20200305165851604.jpg"},
    {name:"川味凉面", img:"https://img.meishi.cc/20200305/20200305165917961.jpg"},
    {name:"干锅肥肠", img:"https://img.meishi.cc/20200305/20200305165943271.jpg"},
    {name:"麻辣干锅鸡", img:"https://img.meishi.cc/20200305/20200305170010782.jpg"},
    {name:"水煮鱼片", img:"https://img.meishi.cc/20200305/20200305170037531.jpg"},
  ];

  let currentPage = 1;
  let order = {};

  function renderMenu() {
    const menuGrid = document.getElementById("menuGrid");
    menuGrid.innerHTML = "";
    const startIndex = (currentPage - 1) * dishesPerPage;
    const endIndex = Math.min(startIndex + dishesPerPage, dishes.length);
    for (let i = startIndex; i < endIndex; i++) {
      const dish = dishes[i];
      const dishCard = document.createElement("div");
      dishCard.className = "dish-card";

      const img = document.createElement("img");
      img.src = dish.img;
      img.alt = dish.name;
      dishCard.appendChild(img);

      const nameDiv = document.createElement("div");
      nameDiv.className = "dish-name";
      nameDiv.textContent = dish.name;
      dishCard.appendChild(nameDiv);

      const checkbox = document.createElement("input");
      checkbox.type = "checkbox";
      checkbox.className = "dish-check";
      checkbox.id = "dish_" + i;
      checkbox.checked = !!order[dish.name];
      checkbox.addEventListener("change", function () {
        if (this.checked) {
          order[dish.name] = true;
        } else {
          delete order[dish.name];
        }
      });

      const label = document.createElement("label");
      label.htmlFor = "dish_" + i;
      label.textContent = " 点这道菜";

      dishCard.appendChild(checkbox);
      dishCard.appendChild(label);

      menuGrid.appendChild(dishCard);
    }

    // 更新分页按钮状态
    document.getElementById("prevPageBtn").disabled = currentPage === 1;
    document.getElementById("nextPageBtn").disabled = currentPage === Math.ceil(dishes.length / dishesPerPage);
    document.getElementById("pageInfo").textContent = currentPage + " / " + Math.ceil(dishes.length / dishesPerPage);
  }

  document.getElementById("prevPageBtn").addEventListener("click", () => {
    if (currentPage > 1) {
      currentPage--;
      renderMenu();
    }
  });

  document.getElementById("nextPageBtn").addEventListener("click", () => {
    if (currentPage < Math.ceil(dishes.length / dishesPerPage)) {
      currentPage++;
      renderMenu();
    }
  });

  document.getElementById("addDishBtn").addEventListener("click", () => {
    const newDishInput = document.getElementById("newDishInput");
    let val = newDishInput.value.trim();
    if (val === "") {
      alert("请输入菜名");
      return;
    }
    if (!order[val]) {
      order[val] = true;
      dishes.push({ name: val, img: "https://img.meishi.cc/20200305/20200305160856508.jpg" }); // 默认图片
      // 跳到最后一页显示新菜
      currentPage = Math.ceil(dishes.length / dishesPerPage);
      newDishInput.value = "";
      renderMenu();
    } else {
      alert("菜已经在订单中");
    }
  });

  document.getElementById("submitBtn").addEventListener("click", () => {
    const orderText = Object.keys(order).join("\n");
    if (orderText === "") {
      alert("请先点菜！");
      return;
    }
    const formData = new FormData();
    formData.append(orderFieldName, orderText);

    fetch(googleFormAction, {
      method: "POST",
      mode: "no-cors",
      body: formData
    }).then(() => {
      alert("订单已提交，谢谢！");
      order = {};
      currentPage = 1;
      renderMenu();
    }).catch(() => {
      alert("提交失败，请稍后再试");
    });
  });

  renderMenu();
</script>
</body>
</html>
